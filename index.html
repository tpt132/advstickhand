// Convert RGB to HSV helper (values 0-360 for H, 0-1 for S and V)
function rgbToHsv(r, g, b) {
  r /= 255; g /= 255; b /= 255;
  let max = Math.max(r, g, b), min = Math.min(r, g, b);
  let h, s, v = max;

  let d = max - min;
  s = max === 0 ? 0 : d / max;

  if (max === min) {
    h = 0; // achromatic
  } else {
    switch (max) {
      case r: h = (g - b) / d + (g < b ? 6 : 0); break;
      case g: h = (b - r) / d + 2; break;
      case b: h = (r - g) / d + 4; break;
    }
    h /= 6;
  }

  return {
    h: h * 360,
    s: s,
    v: v
  };
}

// Define your puck's hue range in degrees (tweak as needed)
const targetHueMin = 200; // ~blue range start
const targetHueMax = 240; // ~blue range end
const minSaturation = 0.4; // avoid low saturation colors (grayish)
const minValue = 0.2; // avoid very dark pixels

function isBluePixelHSV(r, g, b) {
  const hsv = rgbToHsv(r, g, b);
  return (
    hsv.h >= targetHueMin &&
    hsv.h <= targetHueMax &&
    hsv.s >= minSaturation &&
    hsv.v >= minValue
  );
}
